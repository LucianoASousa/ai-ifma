<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Predi√ß√£o de Bilheteria TMDB - IFMA</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <div class="logo">
            <i class="fas fa-film"></i>
            <div>
              <h1>Predi√ß√£o de Bilheteria TMDB</h1>
              <p>Instituto Federal do Maranh√£o - IFMA Campus Imperatriz</p>
            </div>
          </div>
          <div class="header-info">
            <span><i class="fas fa-brain"></i> Machine Learning</span>
            <span
              ><i class="fas fa-chart-line"></i> Regress√£o Linear &
              Log√≠stica</span
            >
          </div>
        </div>
      </header>

      <!-- Navigation -->
      <nav class="nav-tabs">
        <div class="tab-buttons">
          <button class="tab-btn active" data-tab="predictor">
            ÔøΩÔøΩ Preditor
          </button>
          <button class="tab-btn" data-tab="analise">üìä An√°lise</button>
          <button class="tab-btn" data-tab="versoes">üéØ Vers√µes</button>
          <button class="tab-btn" data-tab="sobre">‚ÑπÔ∏è Sobre</button>
        </div>
      </nav>

      <!-- Predictor Tab -->
      <div class="tab-content active" id="predictor">
        <div class="predictor-section">
          <h2><i class="fas fa-magic"></i> Preditor de Bilheteria</h2>
          <p class="subtitle">
            Insira as caracter√≠sticas do filme para prever sua bilheteria
          </p>

          <div class="predictor-grid">
            <div class="input-form">
              <div class="form-group">
                <label for="budget">
                  <i class="fas fa-dollar-sign"></i> Or√ßamento (USD)
                </label>
                <input
                  type="number"
                  id="budget"
                  placeholder="Ex: 50000000"
                  min="1000000"
                  max="500000000"
                  value="50000000"
                />
                <small>Entre $1M e $500M</small>
              </div>

              <div class="form-group">
                <label for="popularity">
                  <i class="fas fa-star"></i> Popularidade
                </label>
                <input
                  type="number"
                  id="popularity"
                  placeholder="Ex: 45.5"
                  min="1"
                  max="100"
                  step="0.1"
                  value="45.5"
                />
                <small>Escala de 1 a 100</small>
              </div>

              <div class="form-group">
                <label for="runtime">
                  <i class="fas fa-clock"></i> Dura√ß√£o (minutos)
                </label>
                <input
                  type="number"
                  id="runtime"
                  placeholder="Ex: 120"
                  min="60"
                  max="300"
                  value="120"
                />
                <small>Entre 60 e 300 minutos</small>
              </div>

              <button class="predict-btn" onclick="predictRevenue()">
                <i class="fas fa-calculator"></i> Prever Bilheteria
              </button>
            </div>

            <div class="results-panel">
              <div
                class="loading-spinner"
                id="loadingSpinner"
                style="display: none"
              >
                <i class="fas fa-spinner fa-spin"></i>
                <p>Executando algoritmos...</p>
              </div>

              <div
                class="prediction-results"
                id="predictionResults"
                style="display: none"
              >
                <h3>
                  <i class="fas fa-chart-line"></i> Resultados da Predi√ß√£o
                </h3>

                <div class="result-card linear">
                  <div class="result-header">
                    <i class="fas fa-chart-line"></i>
                    <span>Regress√£o Linear</span>
                  </div>
                  <div class="result-value" id="linearResult">$0</div>
                  <p class="result-desc">Valor estimado da bilheteria</p>
                </div>

                <div class="result-card logistic">
                  <div class="result-header">
                    <i class="fas fa-chart-pie"></i>
                    <span>Regress√£o Log√≠stica</span>
                  </div>
                  <div class="result-value" id="logisticResult">Baixa</div>
                  <div class="probability-bar">
                    <div class="probability-fill" id="probabilityFill"></div>
                  </div>
                  <p class="result-desc">
                    Classifica√ß√£o: <span id="probabilityText">0%</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Vers√µes Tab -->
      <div id="versoes" class="tab-content">
        <div class="glass-card">
          <h2>üéØ Duas Vers√µes dos Algoritmos</h2>
          <p>
            Este projeto possui duas implementa√ß√µes dos algoritmos de Machine
            Learning:
          </p>

          <div class="versions-comparison">
            <div class="version-card academic">
              <h3>üìä Vers√£o Acad√™mica Completa</h3>
              <div class="version-info">
                <p>
                  <strong>Arquivo:</strong>
                  <code>../tmdb-box-office-prediction/main.py</code>
                </p>
                <p>
                  <strong>Ideal para:</strong> Apresenta√ß√£o acad√™mica e artigo
                  cient√≠fico
                </p>

                <h4>‚ú® Recursos:</h4>
                <ul>
                  <li>üìà An√°lise explorat√≥ria visual com pandas</li>
                  <li>üé® Gr√°ficos profissionais (matplotlib, seaborn)</li>
                  <li>üìä Histogramas de distribui√ß√£o</li>
                  <li>üì¶ Boxplots para detec√ß√£o de outliers</li>
                  <li>üîó Matriz de correla√ß√£o visual</li>
                  <li>üìà Curva ROC com AUC</li>
                  <li>üéØ Matriz de confus√£o visual</li>
                  <li>üìâ Evolu√ß√£o da fun√ß√£o de custo</li>
                </ul>

                <div class="action-buttons">
                  <button id="executar-main-original" class="btn-primary">
                    üöÄ Executar An√°lise Acad√™mica
                  </button>
                  <button id="info-academica" class="btn-secondary">
                    üìã Ver Detalhes
                  </button>
                </div>
              </div>
            </div>

            <div class="version-card web">
              <h3>üåê Vers√£o Web Simplificada</h3>
              <div class="version-info">
                <p><strong>Arquivo:</strong> <code>src/main_simple.py</code></p>
                <p>
                  <strong>Ideal para:</strong> Demonstra√ß√£o interativa e testes
                  r√°pidos
                </p>

                <h4>‚ö° Recursos:</h4>
                <ul>
                  <li>üîß Apenas bibliotecas padr√£o Python</li>
                  <li>üöÄ Algoritmos implementados do zero</li>
                  <li>‚ö° Execu√ß√£o r√°pida</li>
                  <li>üåê Integra√ß√£o com Flask</li>
                  <li>üéÆ Interface web interativa</li>
                  <li>üì± Design responsivo</li>
                  <li>üîÆ Predi√ß√µes em tempo real</li>
                </ul>

                <div class="action-buttons">
                  <button id="usar-web" class="btn-primary">
                    üéÆ Usar Interface Web
                  </button>
                  <button id="info-web" class="btn-secondary">
                    üìã Ver Detalhes
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="recommendation">
            <h3>üéì Recomenda√ß√£o para Avalia√ß√£o</h3>
            <p><strong>Use AMBAS as vers√µes:</strong></p>
            <ol>
              <li>
                <strong>main.py</strong> ‚Üí Para gerar gr√°ficos e an√°lises do
                artigo cient√≠fico
              </li>
              <li>
                <strong>app.py</strong> ‚Üí Para demonstra√ß√£o interativa ao
                professor
              </li>
            </ol>
          </div>

          <div
            id="execution-result"
            class="result-container"
            style="display: none"
          >
            <h3>üìä Resultado da Execu√ß√£o</h3>
            <div id="execution-output"></div>
          </div>
        </div>
      </div>

      <!-- Analysis Tab -->
      <div id="analise" class="tab-content">
        <div class="analysis-section">
          <h2><i class="fas fa-chart-bar"></i> An√°lise Completa dos Dados</h2>
          <p class="subtitle">
            M√©tricas e visualiza√ß√µes dos algoritmos implementados
          </p>

          <button class="analyze-btn" onclick="runFullAnalysis()">
            <i class="fas fa-play"></i> Executar An√°lise Completa
          </button>

          <div
            class="loading-spinner"
            id="analysisLoading"
            style="display: none"
          >
            <i class="fas fa-spinner fa-spin"></i>
            <p>Executando an√°lise completa...</p>
          </div>

          <div
            class="analysis-results"
            id="analysisResults"
            style="display: none"
          >
            <!-- Dataset Info -->
            <div class="stats-grid">
              <div class="stat-card">
                <i class="fas fa-database"></i>
                <div>
                  <h3 id="totalSamples">0</h3>
                  <p>Amostras Totais</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-chart-area"></i>
                <div>
                  <h3 id="meanRevenue">$0</h3>
                  <p>Bilheteria M√©dia</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-chart-line"></i>
                <div>
                  <h3 id="medianRevenue">$0</h3>
                  <p>Bilheteria Mediana</p>
                </div>
              </div>
              <div class="stat-card">
                <i class="fas fa-trophy"></i>
                <div>
                  <h3 id="maxRevenue">$0</h3>
                  <p>Maior Bilheteria</p>
                </div>
              </div>
            </div>

            <!-- Metrics Tables -->
            <div class="metrics-grid">
              <div class="metrics-card">
                <h3><i class="fas fa-chart-line"></i> Regress√£o Linear</h3>
                <table id="linearMetrics">
                  <tr>
                    <td>MSE (Teste)</td>
                    <td id="mse">-</td>
                  </tr>
                  <tr>
                    <td>RMSE (Teste)</td>
                    <td id="rmse">-</td>
                  </tr>
                  <tr>
                    <td>MAE (Teste)</td>
                    <td id="mae">-</td>
                  </tr>
                  <tr>
                    <td>R¬≤ (Teste)</td>
                    <td id="r2">-</td>
                  </tr>
                </table>
              </div>

              <div class="metrics-card">
                <h3><i class="fas fa-chart-pie"></i> Regress√£o Log√≠stica</h3>
                <table id="logisticMetrics">
                  <tr>
                    <td>Acur√°cia</td>
                    <td id="accuracy">-</td>
                  </tr>
                  <tr>
                    <td>Precis√£o</td>
                    <td id="precision">-</td>
                  </tr>
                  <tr>
                    <td>Recall</td>
                    <td id="recall">-</td>
                  </tr>
                  <tr>
                    <td>F1-Score</td>
                    <td id="f1">-</td>
                  </tr>
                </table>
              </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
              <div class="chart-card">
                <h3>Evolu√ß√£o do Custo - Regress√£o Linear</h3>
                <canvas id="linearCostChart"></canvas>
              </div>
              <div class="chart-card">
                <h3>Evolu√ß√£o do Custo - Regress√£o Log√≠stica</h3>
                <canvas id="logisticCostChart"></canvas>
              </div>
            </div>

            <!-- Confusion Matrix -->
            <div class="confusion-matrix-card">
              <h3><i class="fas fa-table"></i> Matriz de Confus√£o</h3>
              <div class="confusion-matrix" id="confusionMatrix">
                <!-- Will be populated by JavaScript -->
              </div>
            </div>

            <!-- Sample Predictions -->
            <div class="predictions-card">
              <h3><i class="fas fa-list"></i> Exemplos de Predi√ß√µes</h3>
              <div class="predictions-table" id="predictionsTable">
                <!-- Will be populated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- About Tab -->
      <div id="sobre" class="tab-content">
        <div class="about-section">
          <h2><i class="fas fa-info-circle"></i> Sobre o Projeto</h2>

          <div class="info-grid">
            <div class="info-card">
              <i class="fas fa-graduation-cap"></i>
              <h3>Informa√ß√µes Acad√™micas</h3>
              <ul>
                <li><strong>Institui√ß√£o:</strong> IFMA Campus Imperatriz</li>
                <li><strong>Curso:</strong> Ci√™ncia da Computa√ß√£o</li>
                <li><strong>Disciplina:</strong> Introdu√ß√£o √† IA</li>
                <li><strong>Professor:</strong> Daniel Duarte Costa</li>
              </ul>
            </div>

            <div class="info-card">
              <i class="fas fa-cogs"></i>
              <h3>Tecnologias Utilizadas</h3>
              <ul>
                <li><strong>Backend:</strong> Python + Flask</li>
                <li><strong>Frontend:</strong> HTML5 + CSS3 + JavaScript</li>
                <li>
                  <strong>ML:</strong> Implementa√ß√£o pr√≥pria (sem sklearn)
                </li>
                <li><strong>Dataset:</strong> TMDB Box Office Prediction</li>
              </ul>
            </div>

            <div class="info-card">
              <i class="fas fa-brain"></i>
              <h3>Algoritmos Implementados</h3>
              <ul>
                <li>
                  <strong>Regress√£o Linear:</strong> Com gradiente descendente
                </li>
                <li>
                  <strong>Regress√£o Log√≠stica:</strong> Classifica√ß√£o bin√°ria
                </li>
                <li>
                  <strong>M√©tricas:</strong> MSE, RMSE, MAE, R¬≤, Acur√°cia, etc.
                </li>
                <li><strong>Visualiza√ß√µes:</strong> Gr√°ficos interativos</li>
              </ul>
            </div>

            <div class="info-card">
              <i class="fas fa-check-circle"></i>
              <h3>Funcionalidades</h3>
              <ul>
                <li>Predi√ß√£o interativa de bilheteria</li>
                <li>An√°lise completa dos dados</li>
                <li>Visualiza√ß√µes em tempo real</li>
                <li>Interface responsiva e moderna</li>
              </ul>
            </div>
          </div>

          <div class="project-description">
            <h3>üîß Constru√ß√£o e Arquitetura do C√≥digo</h3>

            <div class="code-section">
              <h4><i class="fas fa-server"></i> Backend - Flask API</h4>
              <div class="code-details">
                <p><strong>Estrutura Principal:</strong></p>
                <ul>
                  <li>
                    <code>app.py</code> - Servidor Flask com 4 endpoints
                    principais
                  </li>
                  <li>
                    <code>main_simple.py</code> - Classes de ML implementadas do
                    zero
                  </li>
                  <li>Cache global para otimiza√ß√£o de performance</li>
                </ul>

                <p><strong>Endpoints da API:</strong></p>
                <ul>
                  <li><code>GET /</code> - Interface principal</li>
                  <li><code>POST /api/predict</code> - Predi√ß√£o individual</li>
                  <li><code>GET /api/analyze</code> - An√°lise completa</li>
                  <li><code>GET /api/status</code> - Status do sistema</li>
                </ul>

                <p><strong>Otimiza√ß√µes Implementadas:</strong></p>
                <ul>
                  <li>
                    <strong>Normaliza√ß√£o de dados:</strong> Valores de
                    bilheteria normalizados (0-1) para evitar overflow
                  </li>
                  <li>
                    <strong>Cache inteligente:</strong> Modelos treinados uma
                    vez e reutilizados
                  </li>
                  <li>
                    <strong>Valida√ß√£o robusta:</strong> Filtros para dados
                    v√°lidos (budget > $1M, runtime > 60min)
                  </li>
                  <li>
                    <strong>Tratamento de erros:</strong> Try-catch em todas as
                    opera√ß√µes cr√≠ticas
                  </li>
                </ul>
              </div>
            </div>

            <div class="code-section">
              <h4>
                <i class="fas fa-brain"></i> Algoritmos de Machine Learning
              </h4>
              <div class="code-details">
                <p>
                  <strong>Regress√£o Linear (Implementa√ß√£o Pr√≥pria):</strong>
                </p>
                <ul>
                  <li>
                    <strong>Gradiente Descendente:</strong>
                    <code>Œ∏ = Œ∏ - Œ±‚àáJ(Œ∏)</code>
                  </li>
                  <li>
                    <strong>Fun√ß√£o de Custo:</strong> MSE =
                    <code>1/2m Œ£(h(x) - y)¬≤</code>
                  </li>
                  <li>
                    <strong>Learning Rate:</strong> 0.01 (otimizado para
                    converg√™ncia)
                  </li>
                  <li>
                    <strong>Converg√™ncia:</strong> Detec√ß√£o autom√°tica quando
                    custo estabiliza
                  </li>
                </ul>

                <p>
                  <strong>Regress√£o Log√≠stica (Implementa√ß√£o Pr√≥pria):</strong>
                </p>
                <ul>
                  <li>
                    <strong>Fun√ß√£o Sigmoid:</strong>
                    <code>œÉ(z) = 1/(1 + e^(-z))</code>
                  </li>
                  <li>
                    <strong>Log-Likelihood:</strong>
                    <code>J = -1/m Œ£[y*log(h) + (1-y)*log(1-h)]</code>
                  </li>
                  <li>
                    <strong>Classifica√ß√£o:</strong> Alta/Baixa bilheteria
                    (threshold = mediana)
                  </li>
                  <li>
                    <strong>Probabilidades:</strong> Sa√≠da cont√≠nua entre 0 e 1
                  </li>
                </ul>

                <p><strong>M√©tricas Implementadas:</strong></p>
                <ul>
                  <li><strong>Regress√£o:</strong> MSE, RMSE, MAE, R¬≤ Score</li>
                  <li>
                    <strong>Classifica√ß√£o:</strong> Acur√°cia, Precis√£o, Recall,
                    F1-Score
                  </li>
                  <li>
                    <strong>Matriz de Confus√£o:</strong> TP, FP, TN, FN
                    calculados manualmente
                  </li>
                </ul>
              </div>
            </div>

            <div class="code-section">
              <h4>
                <i class="fas fa-palette"></i> Frontend - Interface Moderna
              </h4>
              <div class="code-details">
                <p><strong>Design System:</strong></p>
                <ul>
                  <li>
                    <strong>Glassmorphism:</strong> backdrop-filter,
                    transpar√™ncias, bordas suaves
                  </li>
                  <li>
                    <strong>Gradientes:</strong> Linear azul-roxo (#667eea ‚Üí
                    #764ba2)
                  </li>
                  <li>
                    <strong>Responsividade:</strong> CSS Grid + Flexbox para
                    todos os dispositivos
                  </li>
                  <li>
                    <strong>Tipografia:</strong> Google Fonts (Inter) para
                    legibilidade
                  </li>
                </ul>

                <p><strong>JavaScript Interativo:</strong></p>
                <ul>
                  <li>
                    <strong>AJAX Requests:</strong> Fetch API para comunica√ß√£o
                    ass√≠ncrona
                  </li>
                  <li>
                    <strong>Valida√ß√£o em Tempo Real:</strong> Feedback
                    instant√¢neo nos inputs
                  </li>
                  <li>
                    <strong>Chart.js:</strong> Gr√°ficos de converg√™ncia
                    interativos
                  </li>
                  <li>
                    <strong>Estados de Loading:</strong> Spinners e feedback
                    visual
                  </li>
                </ul>

                <p><strong>Funcionalidades Avan√ßadas:</strong></p>
                <ul>
                  <li>
                    <strong>Exemplos Pr√©-definidos:</strong> Filmes famosos para
                    teste r√°pido
                  </li>
                  <li>
                    <strong>Formata√ß√£o Brasileira:</strong> Moeda (R$) e n√∫meros
                    localizados
                  </li>
                  <li>
                    <strong>Navega√ß√£o por Abas:</strong> SPA (Single Page
                    Application)
                  </li>
                  <li>
                    <strong>Anima√ß√µes CSS:</strong> Transi√ß√µes suaves e
                    micro-intera√ß√µes
                  </li>
                </ul>
              </div>
            </div>

            <div class="code-section">
              <h4><i class="fas fa-database"></i> Processamento de Dados</h4>
              <div class="code-details">
                <p><strong>Dataset TMDB:</strong></p>
                <ul>
                  <li>
                    <strong>Volume:</strong> 1.938 registros v√°lidos de ~3.000
                    totais
                  </li>
                  <li>
                    <strong>Features:</strong> Budget, Popularity, Runtime
                  </li>
                  <li><strong>Target:</strong> Revenue (bilheteria)</li>
                  <li>
                    <strong>Filtros:</strong> Budget > $1M, Runtime > 60min,
                    Popularity > 1
                  </li>
                </ul>

                <p><strong>Pr√©-processamento:</strong></p>
                <ul>
                  <li>
                    <strong>Normaliza√ß√£o Z-Score:</strong>
                    <code>(x - Œº) / œÉ</code>
                  </li>
                  <li>
                    <strong>Divis√£o Train/Test:</strong> 70% treino, 30% teste
                  </li>
                  <li>
                    <strong>Tratamento de Outliers:</strong> Remo√ß√£o de valores
                    extremos
                  </li>
                  <li>
                    <strong>Encoding de Classes:</strong> Mediana como threshold
                    para classifica√ß√£o
                  </li>
                </ul>
              </div>
            </div>

            <h3>üìä Descri√ß√£o do Projeto</h3>
            <p>
              Este projeto implementa algoritmos de Machine Learning para
              predi√ß√£o de bilheteria de filmes utilizando o dataset TMDB (The
              Movie Database). Os algoritmos foram desenvolvidos do zero, sem
              uso de bibliotecas prontas como scikit-learn, demonstrando
              compreens√£o profunda dos fundamentos matem√°ticos.
            </p>
            <p>
              O sistema permite tanto predi√ß√µes individuais quanto an√°lise
              completa dos dados, incluindo m√©tricas de avalia√ß√£o, visualiza√ß√µes
              de converg√™ncia e matriz de confus√£o.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
